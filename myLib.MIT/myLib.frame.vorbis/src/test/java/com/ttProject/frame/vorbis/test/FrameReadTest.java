package com.ttProject.frame.vorbis.test;

import java.nio.ByteBuffer;

import org.apache.log4j.Logger;
import org.junit.Test;

import com.ttProject.frame.vorbis.VorbisHeaderBufferSplitter;
import com.ttProject.nio.channels.ByteReadChannel;
import com.ttProject.nio.channels.IReadChannel;
import com.ttProject.util.HexUtil;

/**
 * vorbisのframeの読み込み動作テスト
 * @author taktod
 *
 */
public class FrameReadTest {
	/** ロガー */
	private Logger logger = Logger.getLogger(FrameReadTest.class);
	/**
	 * header部分読み込みテスト
	 * @throws Exception
	 */
	@Test
	public void headerReadTest() throws Exception {
		IReadChannel channel = new ByteReadChannel(HexUtil.makeBuffer(
				"021E5601766F72626973000000000244AC0000FFFFFFFF00770100FFFFFFFFB801"
				+ "03766F726269732D000000586970682E4F7267206C6962566F7262697320492032303130313130312028536368617566656E7567676574290100000015000000656E636F6465723D4C61766335342E31302E31303001"
				+ "05766F726269732542435601004000002473182A46A5731684101A425019E31C42CE6BEC19424C11821C324C5BCB25739021A4A042885B2881D09055000040000087417814848A41082184253D589283273D082184883978148469410821841042082184104208218445396892832741081D84E330380C83E538F81C8445395810832741E820840F42B89A83AC3908218424354850830639E81C84C22C288A82C430B816840435288C82E430C8D4830B42889A834935F81A846741781684694108218424414890830641C8188446415892830639B81484CB41A81A842A39081F842034641500900000A0A2288AA2280A101AB20A00C8000010405114C7711CC9911CC9B11C0B080D590500000100080000A0488AA4488EE44892245992255992255992E689AA2CCBB22CCBB22CCB32101AB20A0048000050510C45711407080D59050064000008A0388AA5588AA5688AE7888E088486AC0200800000040000103443533C479444CF5455D7B66DDBB66DDBB66DDBB66DDBB66D5B966519080D59050040000010D26966A9068830031906424356010008000080118A30C480D09055000040000080184A0EA209AD39DF9CE3A0590E9A4AB1391D9C48B579929B8AB939E79C73CEC9E69C31CE39E79CA29C590C9A09AD39E79CC4A0590A9A09AD39E79C27B179D09A2AAD39E79C71CEE9609C11C639E79C26AD79909A8DB539E79C05AD698E9A4BB139E79C48B979529B4BB539E79C73CE39E79C73CE39E79CEAC5E91C9C13CE39E79CA8BDB9969BD0C539E79C4FC6E9DE9C10CE39E79C73CE39E79C73CE39E79C20346415000004004010868D61DC2908D2E768204611621A32E941F7E830091A839C42EAD1E868A4943A08259571524A27080D590500000200400821851452482185145248218514628821861872CA29A7A0824A2AA9A8A28C32CB2CB3CC32CB2CB3CC3AECACB30E3B0C31C410432BADC452536D35D6586BEE39E79A83B4565A6BADB5524A29A594520A4243560100200000044206196490514821851462"
				+ "8829A79C720A2AA880D090550000200080000000004FF21CD1111DD1111DD1111DD1111DD1F11CCF112551122551122DD33235D35345557565D7967559B77D5BD8855DF77DDDF77DDDF8756158966559966559966559966559966559962034641500000200002084104248218514524829C61873CC39E8249410080D59050000020008000000701447711CC9911C49B2244BD224CDD22C4FF3344F133D511445D33455D1155D51376D513665D3355D53365D55566D57966D5BB675DB9765DBF77DDFF77DDFF77DDFF77DDFF77D5D0742435601001200003A92232992222992E3388E24494068C82A004006004000008AE2288EE33892244992256992677996A8999AE9999E2AAA4068C82A00001000400000000000008AA6788AA9788AA8788EE88892689996A8A99A2BCAA6ECBAAEEBBAAEEBBAAEEBBAAEEBBAAEEBBAAEEBBAAEEBBAAEEBBAAEEBBAAEEBBAAEEBBAAE0B8486AC02002400007424477224475224455224477280D0905500800C008000001CC3312445722CCBD2344FF3344F133DD1133DD35345577481D0905500002000800000000000000CC9B014CBD11C4D1225D5522D55532DD55245D5535555555555555555555555555555555555555555555555555555555555555555554DD3344D13080D590900900100A0105B4BADC5DC096A1C62D272CC24744E6210AAB1082247B5B7CA31A51CC59E1A889451127BAA28638A49CC31B4D02927ADD6523A8514A498530A15520E5A2034648500109A01E0701C40B22C40B2340000000000000090340DD03C0FB03C0F00000000000000244D032C4F0334CF030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040D23440F33C40F33C00000000000000D03C0FF04411F04411000000000000002CCF033CD1033C5104000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
				+ "00000000000000000000000000000000000000000000C0D13440F33C40F33C00000000000000B03C0FF04411F03C110000000000000034CF033C51043C5104000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000010E00000106021141AB2220088130030380E340D9A06CF03389605CF83E74114018E65C1F3E07910450000000000000000000034CF83AA4255E1AA00"
				+ "CDF360AA5055A82E0000000000000000000096E74155A1AA705D80E5793055982A5415000000000000000000004F14A1BA505DB82AC03345B82A5C15AA0B00000000000000000000000000000000000000000000080000187000000830A10C141AB2220088130070388A65010080E338960500008EE3581600005896258A000060599A280200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000187000000830A10C141AB2120088020030288A6501CBB22C6059960534CDB2009606D03C80E7014411000800002870000008B0415362718042435602005100000645B12C4D13459AA6699A268A344DD3344D14799EA6799E6942D33CCF34218A9E679A1045CF334D98A628AA2A10455515000050E00000106083A6C4E2008586AC04004202000C8E62599E278AA2288AA6A9AA344DD33C4F1445D13455D555699AA6799E288AA269AAAAEAF23C4D1345D31445D35455D785A689A2699AA269AAAAEBC2F344D1344D535555D575E179A2689AA6A9AAAEEBBA104551344DD35455D7755D208AA6699AAAEABAB20C44D1345555555D579681289AA6AAAAAAEBCA32304DD35455D7955D590698A6AABAAE2CCB3240555DD7756559B601AAEABAAE2BCBB20D705DD7956559B66D00AE2BCBB26CDB0200000E1C0000028CA0938C2A8BB0D1840B0F40A1212B0280280000C018A61453CA302621A4101AC624841242262595944AAA20A4525229158454522A25A392526A295510522929950A422AA595540000D8810300D881855068C84A00200F0080204629C618630C32A61463CE390795528A31E79C938C31C69873CE49291963CC39E7A4948C39E79C73524AE69C73CE3929A573CE39E79C94524AE79C734E4A292584CE3927A594D239E79C13000054E000001060A3C8E60423418586AC04005201000C8E63599AA6699E278A9624699AE7799E289AA666499AE6799E278AA6C9F33C4F1445D1345595"
				+ "E7799E288AA269AA2AD71545D3344D555555B22C8AA6699AAAEABA304DD35455D7756598A669AAAAEBBA2E6CDB5455D5756519B6AD9AAA2ABBB20C5C577565D7B681EBBAAEECDAB60000F0040700A0021B564738291A0B2C346425009001004018838C4208218510420A2184945208090000187000000830A10C141AB212004805000090B1D65A6BADB5D6404729A594524AA9708C524A29A594524A29A594524A29A5944A4A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A29A594524A05002E553800E83ED8B03AC249D15860A1212B0180540000C018A598724E422915428C392621A5162B8418734E4A4A3116CF3907A194D65A2C9E730E4229ADC55854EA9C94945A8AADA814322929A5D66210C294945A6BA5B520842AA9C4965A6B41085D536A2996D88210B6B692528C3106E1838FB195586A0C3EF8205B2B31D55A00006683030044820DAB239C148D05161AB21200080900208C518A31C61873CE39E724638C31E69C73104208A1648C31E79C730E42082194CE39E79C731042082184524AC79C730E420821845052EA9C73104208A184104A2A9D730E42082184524A49A573104208A18450424925A5D43908218410422929A5944208218412422825A59452082184104228A1A494520A2184524208A59494524A2985104A08A59492524929A5124A09218452524929A51442082594524A2A29A5944A09A184524A29A5A494524A21945042290500001C3800000418412719551661A309171E80424356020064000094B2524A28AD554022A518A4DA424799831473892C730C5ACDA5620E2906AD86CA31A518B416320899524C4A0925754C29272DC5984AE79CA498738DA57310000000410080809000000304053300C0E000E17310740204471B00802044668844C3427078500910115301406282422E0054585CA45D5C4097012EE8E2AE0321042108412C0EA080041C9C70C3136F"
				+ "78C20D4ED0292A752000000000000C00F00000905C001111D1CC6164686C7074787C8084888C9008000000000018007C00002425404444347318191A1B1C1D1E1F20212223240100800002000000002080000404040000000000020000000404"
		));
		VorbisHeaderBufferSplitter splitter = new VorbisHeaderBufferSplitter();
		for(ByteBuffer buffer : splitter.doSplit(channel)) {
			logger.info(HexUtil.toHex(buffer, 0, 20, true));
		}
	}
	public void readTest() {
		String a = "84E78B5B4A373C5FDC52BABBA2B10EAA821157F4E5D4442291482412193B76ECD8B17DBD5EAFD7EB39";
		String b = "FA893E86DDA47EB7780DD8C9E0137D0CBB49FD6EF11AB0938127E8F57A00004801000000000000000000000000000000009079822693F9027E8F17651D00D8DC0D8BCD74B5582D568BD562B5CD9C3173C6CC19D3C974320E631A";
	}
}
